- type: serial
  name: build
  steps:
  - service: maven
    command: mvn compile -Dcheckstyle.skip=true -e -DskipTests -DskipITs -Dmaven.test.skip=true --fail-fast --nsu -Denforcer.skip=true
  - service: maven
    command: touch target/persists
  - service: maven
    name: sourceclear
    command: sh -c "DEBUG=1 curl -sSL https://download.sourceclear.com/ci.sh | sh -s -- scan target/"

- type: parallel
  name: tests
  steps: 
  - service: maven
    name: unit tests
    command: mvn test -Punit -B
  - service: integration
    name: integration tests
    command: echo 'integration tests'

- type: serial
  name: deploy
  steps: 
  - service: maven
    name: deploy command here
    command: ls -lah target/

